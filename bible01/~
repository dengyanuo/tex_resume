#!/bin/bash

# https://www.biblegateway.com/passage/?search=1+peter+1&version=NIV

version=NIV

test -z "$1" && target_name='1+peter' || target_name=$1

target_file=$(echo $target_name|sed -e 's;[+ -];_;g').tex

#echo " target_file         = ${target_file}"
#echo " target_name         = ${target_name}"

if [ -f "${target_file}" ] ; then
    echo
    echo " file (${target_file}) exit. skip."
    echo "`ls   -l ${target_file}` .... already exist."
    echo
    exit 
fi

wget \
    -q "https://www.biblegateway.com/passage/?search=${target_name}&version=${version}" \
    -O - \
    |grep 'std-text' \
    |sed \
    -e 's,&nbsp;, ,g' \
    \
    -e 's;< *br *\/>;\n\\par ;g' \
    \
    -e 's,< *a\b[^>]*>[^<]*</a>,\n,g' \
    \
    > ${target_file} 

echo "`ls -l ${target_file} ` .... generated"
